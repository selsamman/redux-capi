<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Redactions · redux-capi</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Redactions are self-reducing actions that contain a state schema which defines the path to a particular property and provides a function for returning a mutated value for that property.  "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Redactions · redux-capi"/><meta property="og:type" content="website"/><meta property="og:url" content="https://selsamman.github.io/redux-capi/"/><meta property="og:description" content="Redactions are self-reducing actions that contain a state schema which defines the path to a particular property and provides a function for returning a mutated value for that property.  "/><meta property="og:image" content="https://selsamman.github.io/redux-capi/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://selsamman.github.io/redux-capi/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/redux-capi/img/capi.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/redux-capi/js/scrollSpy.js"></script><link rel="stylesheet" href="/redux-capi/css/main.css"/><script src="/redux-capi/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/redux-capi/"><img class="logo" src="/redux-capi/img/capi.ico" alt="redux-capi"/><h2 class="headerTitleWithLogo">redux-capi</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>API Specs</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/redux-capi/docs/intro">What it is</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/intro_usage">Usage</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/intro_rationale">Rationale</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/intro_context">Context</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Specs</h3><ul class=""><li class="navListItem"><a class="navItem" href="/redux-capi/docs/spec">API Spec</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/redux-capi/docs/spec_redactions">Redactions</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/spec_selectors">Selectors</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/spec_thunks">Thunks</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/spec_mounting">Mounting</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/spec_composition">Composing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/redux-capi/docs/reference_createAPI">createAPI</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/reference_api">API</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/reference_mount">api.mount()</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/reference_mocks">api.mock()</a></li><li class="navListItem"><a class="navItem" href="/redux-capi/docs/reference_utility">Utilities</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Redactions</h1></header><article><div><span><p>Redactions are self-reducing actions that contain a state schema which defines the path to a particular property and provides a function for returning a mutated value for that property.</p>
<p>A redaction is a property with a function as the value.  The name of the property is the name of the self-dispatching function that will be created in the API.  The function is passed the arguments that consumer of the redaction passes to the function.</p>
<pre><code class="hljs">functionName: <span class="hljs-function"><span class="hljs-params">(arguments)</span> =&gt;</span> (returns schema)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="schema"></a><a href="#schema" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Schema</h3>
<p>The schema defines the path to state properties and defines how those properties will be affected.  The path is defined as a hierarchy of objects where each property name corresponds to a property in the state hierarchy.  The hierarchy continues with subordinate objects until and an object that contains properties with functions attached is reached.  Such an object contains functions which determine what to do based on their property name.  They include:</p>
<ul>
<li>Selecting an array element using <strong>where</strong></li>
<li>Inserting or appending an element to array with <strong>insert</strong> and <strong>append</strong></li>
<li>Setting a value for a property with <strong>set</strong></li>
<li>Assigning partial properties to an object with <strong>assign</strong></li>
</ul>
<p>Because the entire schema is returned by the redaction function which is passed the arguments from consumer the functions may reference these arguments as a closure.</p>
<pre><code class="hljs">setFilter: <span class="hljs-function"><span class="hljs-params">(filterValue)</span> =&gt;</span> (
{
   widgetList: {
       filter: {
           set: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> filterValue
       }
   }
}
</code></pre>
<p>The functions in the schema have particular arguments that are passed to them and in many cases the object that contains them is expected to have other specifically named properties that collectively determine the disposition of the state property.</p>
<h3><a class="anchor" aria-hidden="true" id="set-and-assign"></a><a href="#set-and-assign" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set and Assign</h3>
<pre><code class="hljs">state_property_name: {
    <span class="hljs-built_in">set</span>: (<span class="hljs-keyword">state</span>, property, context) =&gt; (return value)
}
</code></pre>
<pre><code class="hljs">state_property_name: {
    assign: (<span class="hljs-keyword">state</span>, property, context) =&gt; (return value)
}
</code></pre>
<p>The arguments are:</p>
<ul>
<li><strong>state</strong> the previous value of the state</li>
<li><strong>property</strong> the previous value of the particular state property</li>
<li><strong>context</strong> the component instance context</li>
</ul>
<p><strong>set</strong> mutates the state property to the new value returned from the function while <strong>assign</strong> expects an object and the individual propeties present are mutated (Object.assign)</p>
<h3><a class="anchor" aria-hidden="true" id="append"></a><a href="#append" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Append</h3>
<pre><code class="hljs">state_array_property_name: {
    append: (<span class="hljs-keyword">state</span>, context) =&gt; (return element value)
}
</code></pre>
<p>The arguments are:</p>
<ul>
<li><strong>state</strong> the previous value of the state</li>
<li><strong>context</strong> the component instance context</li>
</ul>
<p>The function returns a new array element to be appended.</p>
<h3><a class="anchor" aria-hidden="true" id="insert"></a><a href="#insert" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Insert</h3>
<pre><code class="hljs">state_array_property_name: {
    before: () =&gt; (<span class="hljs-keyword">state</span>, context) =&gt; (return index value)
    insert: (<span class="hljs-keyword">state</span>, context) =&gt; (return element value)
}
</code></pre>
<p>or</p>
<pre><code class="hljs">state_array_property_name: {
    after: () =&gt; (<span class="hljs-keyword">state</span>, context) =&gt; (return index value)
    insert: (<span class="hljs-keyword">state</span>, context) =&gt; (return element value)
}
</code></pre>
<p>The arguments are:</p>
<ul>
<li><strong>state</strong> the previous value of the state</li>
<li><strong>context</strong> the component instance context</li>
</ul>
<p>The <strong>after</strong> function returns the index in the array after which the element is to be inserted and the <strong>before</strong> function returns the index in the array before which the element is to be inserted</p>
<h3><a class="anchor" aria-hidden="true" id="where"></a><a href="#where" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Where</h3>
<p>When a state property is an array and only one element is to be affected the <strong>where</strong> is used to select that function.</p>
<pre><code class="hljs">state_array_property_name: {
    where: (<span class="hljs-keyword">state</span>, element, index, context) =&gt; (boolean return value)
    action_to_be_taken ...
}
</code></pre>
<p>The arguments are:</p>
<ul>
<li><strong>state</strong> the previous state of the particular state property</li>
<li><strong>element</strong> the state value of the particular array element</li>
<li><strong>index</strong> the index of the particular array element</li>
<li><strong>context</strong> the context from which context properties can be extracted</li>
</ul>
<p>The action to be taken may be:</p>
<ul>
<li><strong>set</strong></li>
<li><strong>assign</strong></li>
<li><strong>select</strong></li>
</ul>
<p><strong>select</strong> allows you to select that element and continue the hierarchy</p>
<pre><code class="hljs">state_array_property_name: {
    where: (<span class="hljs-keyword">state</span>, element, index, context) =&gt; (boolean return value)
    select: {
        <span class="hljs-keyword">state</span> heirarchy or another where
    }
}
</code></pre>
<p>If the next level is another array you can use <strong>where</strong></p>
<pre><code class="hljs">state_array_property_name: {
    where: (<span class="hljs-keyword">state</span>, element, index, context) =&gt; (boolean return value)
    select: {
        where: (<span class="hljs-keyword">state</span>, element, index, context) =&gt; (boolean return value)
        <span class="hljs-keyword">state</span> heirarchy or another where
    }
}
</code></pre>
<p>Otherwise it would refer to a state property</p>
<pre><code class="hljs">state_array_property_name: {
    where: (<span class="hljs-keyword">state</span>, element, index, context) =&gt; (boolean return value)
    select: {
        state_property_name: {
            <span class="hljs-keyword">state</span> heirarchy or other action
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/redux-capi/docs/spec"><span class="arrow-prev">← </span><span>API Spec</span></a><a class="docs-next button" href="/redux-capi/docs/spec_selectors"><span>Selectors</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/redux-capi/" class="nav-home"><img src="/redux-capi/img/capi.ico" alt="redux-capi" width="66" height="58"/></a><div><h5>Docs</h5><a href="/redux-capi/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/redux-capi/docs/en/doc2.html">Guides (or other categories)</a><a href="/redux-capi/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/redux-capi/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/redux-capi/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/redux-capi/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Sam Elsamman</section></footer></div></body></html>